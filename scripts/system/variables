# Copyright (c) 2019, Firas Khalil Khana
# Distributed under the terms of the ISC License

export ARCH=x86_64
export TUPL=$ARCH-pc-linux-musl

export GLAD=/
export CERD=/cerata

export SLOG=/logs/system
export SSCR=/scripts/system
export STMP=/temporary/system
export SBLD=$STMP/system/builds
export SCER=$STMP/system/cerata
export SSRC=$TMPD/system/sources

export TOOL=/toolchain

export PATH=$TOOL/bin:$TOOL/sbin:$TOOL/usr/bin:$TOOL/usr/sbin
export LD_LIBRARY_PATH=$TOOL/lib

export MAKEFLAGS=-j1

export AR=gcc-ar
export NM=gcc-nm
export RANLIB=gcc-ranlib

export GCSE='-fgcse-sm -fgcse-las'
export GRAPHITE='-fgraphite-identity -floop-nest-optimize -floop-parallelize-all'
export MARCH='-march=x86-64'
export OTHER='-fmerge-all-constants -fdevirtualize-at-ltrans -fvariable-expansion-in-unroller'
export PGO='-ftracer -funroll-loops'
export SMS='-fmodulo-sched -fmodulo-sched-allow-regmoves'

export CFLAGS="-pipe -fopenmp -g0 -Ofast $SMS $GCSE -fira-loop-pressure -fipa-pta $GRAPHITE $OTHER -flto $PGO -s $MARCH"
export CFLAGSNOLTO="-pipe -fopenmp -g0 -Ofast $SMS $GCSE -fira-loop-pressure -fipa-pta $GRAPHITE $OTHER $PGO -s $MARCH"
export CFLAGSNOOPENMP="-pipe -g0 -Ofast $SMS $GCSE -fira-loop-pressure -fipa-pta $GRAPHITE $OTHER -flto $PGO -s $MARCH"
export CXXFLAGS="$CFLAGS"
export LDFLAGS="-Wl,--strip-all -Wl,-z,now,-z,relro -Wl,--as-needed $CFLAGS"
