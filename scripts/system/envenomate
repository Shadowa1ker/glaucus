# Copyright (c) 2019, Firas Khalil Khana
# Distributed under the terms of the ISC License

envenomate() {
  for ceras in $@; do
    install -dv $SCER/$ceras/sac $SCER/$ceras/venom

    . $CERD/$ceras/ceras/ceras
    . $CERD/$name/ceras/system.ceras
    
    prepare_system || { echo system $name prepare failed; exit $?;  }
    configure_system || { echo system $name configure failed; exit $?; }
    build_system || { echo system $name build failed; exit $?; }
    install_system || { echo system $name install failed; exit $?; }

    #cd $SCER/$name/sac
    
    #tar cJvf ../venom/$name-$version-$release-$arch.tar.xz .
    #sha1sum $(tar cJvvf ../venom/$name-$version-$release-$arch.tar.xz . 2>&1 | mawk -v OFS=' ' '{print $2, $10}' | sed '/^d/ d' | mawk '{print $2}' | sed 's/\.\///' | sort) > ../venom/checksum
    #tar xvf ../venom/$name-$version-$release-$arch.tar.xz -C /
    #rsync -vah ../venom /usr/cerata/$name --delete
    rsync -vah $SCER/$name/sac/ /
  done
}

envenomate zlib
envenomate file
#envenomate libedit
#envenomate m4
#envenomate bc
#envenomate binutils
#envenomate gmp
#envenomate mpfr
#envenomate mpc
#envenomate isl
#envenomate zstd
#envenomate attr
#envenomate acl
#envenomate gcc
#envenomate lbzip2
envenomate pkgconf
#envenomate netbsd-curses
#envenomate libcap
#envenomate sed
#envenomate psmisc
#envenomate bison
#envenomate flex
#envenomate grep
#envenomate oksh
#envenomate dash
#envenomate bash
#envenomate libtool
#envenomate gdbm
#envenomate gperf
#envenomate expat
#envenomate perl
#envenomate perl-xml-parser
#envenomate autoconf
#envenomate automake
#envenomate xz
#envenomate kmod
#envenomate gettext-tiny
#envenomate libuargp
#envenomate musl-fts
#envenomate musl-obstack
#envenomate elfutils-libelf
#envenomate libffi
envenomate libressl
#envenomate python
#envenomate samurai
#envenomate meson
envenomate toybox
#envenomate diffutils
#envenomate mawk
#envenomate pcre2
#envenomate less
#envenomate pigz
#envenomate make
#envenomate patch
#envenomate mandoc
#envenomate libarchive
#envenomate texinfo
#envenomate vim
#envenomate procps-ng
#envenomate util-linux
#envenomate e2fsprogs

#envenomate flex m4 bison
#envenomate diffutils
#envenomate libelf
#envenomate lz4
#envenomate linux

#envenomate skalibs execline s6 utmps
#envenomate toybox
#envenomate smdev nldev nlmon
#envenomate netbsd-curses oksh
#envenomate e2fsprogs
#envenomate s6-linux-init s6-rc glaucus-s6-boot-scripts

#envenomate re2c
#envenomate sinit svc
#envenomate sdhcp
#envenomate bzip2 xz zlib libarchive
#envenomate pcre2 less mandoc vim
#envenomate file iproute2 opendoas libressl
#envenomate expat libffi wayland wayland-protocols
#envenomate jemalloc
#envenomate bin86 lilo
#envenomate s6-linux-utils s6-portable-utils nsss

#envenomate bzip2 zlib libpng freetype_1 libelf-compat pcre glib harfbuzz freetype_2 expat json-c fontconfig
#envenomate util-macros
#envenomate xorgproto libXau libXdmcp xcbproto libxcb
#envenomate libxtrans libX11 libXext libFS libICE libSM libXScrnSaver libXt libXmu libXpm libXaw libXfixes libXcomposite libXrender libXcursor libXdamage libfontenc libXfont libXft libXi libXinerama libXrandr libXRes libXtst libXv libXvMC libXxf86dga libXxf86vm libdmx libpciaccess libxkbfile libxshmfence
#envenomate libxcb-util libxcb-image libxcb-keysyms libxcb-render-util libxcb-wm libxcb-cursor
#envenomate pixman cairo
#envenomate fribidi libdatrie libthai pango
