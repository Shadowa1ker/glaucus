# Copyright (c) 2019, Firas Khalil Khana
# Distributed under the terms of the ISC License

construct() {
  for ceras in $@; do
    . $CERD/$(echo $ceras | sed s/_.//)/ceras/ceras
    . $CERD/$(echo $ceras | sed s/_.//)/ceras/toolchain.ceras
  done
}

# Order is honored, as linux should come first because installing kernel headers
# after musl is installed will just clear the entire headers directory. So
# either build linux first and install its headers, which is the preferred
# method as there's no good reason not to, or build it after musl and manually
# copying the header files to their destination instead of running make install.

# musl, isl and zstd should only be built with the static gcc_1

# libstdc++ will find its way here in the near future
construct linux
construct musl
construct binutils_1
construct gmp mpfr mpc
construct gcc_1
construct binutils_2
construct isl zstd
construct gcc_2
