name=mpfr
version=svn
release=1
arch=x86-64
url=https://scm.gforge.inria.fr/anonscm/$version/$name/trunk
cyst=gmp
description='A portable library written in C for arbitrary precision arithmetic
on floating-point numbers'
licenses='LGPLv2.1+ LGPLv3.0+ PD'

prepare_toolchain() {
  rsync -vah $CERD/$name/trunk/ $TSRC/$name --delete
  cd $TSRC/$name
}

configure_toolchain() {
  # LTO couldn't be enabled on the shared version of mpfr, as it would result
  # in the following error when running configure:
  # error: --enable-lto can only work in static mode (--disable-shared)
  ./autogen.sh
  ./configure \
    --prefix=$TOOL \
    --disable-static \
    --with-gmp=$TOOL
}

build_toolchain() {
  make
}

install_toolchain() {
  make \
    install-strip
}
