name=libressl
version=git
release=1
description='A free version of the TLS/crypto stack forked from OpenSSL with a modern codebase and improved security'
arch=x86_64
url=https://github.com/$name-portable/portable
license='Apachev1.0 BSDv4 GPLv2+ GPLv3+ ISC OpenSSL PD SSLeay'
build () {
        rsync -vah $CERD/$name/portable/ $TMPD/system/sources/$name/ --delete
        rsync -vah $CERD/$name/openbsd/ $TMPD/system/sources/$name/openbsd/ --delete
        cd $TMPD/system/sources/$name
        ./autogen.sh
        mkdir -v $TMPD/system/builds/$name
        cd $TMPD/system/builds/$name
        AR=$AR \
        AS=$AS \
        AWK=$GLAD/bin/mawk \
        CC=$CC \
        CXX=$CXX \
        LD=$LD \
        NM=$NM \
        OBJDUMP=$OBJDUMP \
        RANLIB=$RANLIB \
        STRIP=$STRIP \
        CFLAGS="$CFLAGS" \
        CXXFLAGS="$CXXFLAGS" \
        LDFLAGS="$LDFLAGS" \
        $TMPD/system/sources/$name/configure \
                --prefix= \
                --disable-static
        make
        make \
                DESTDIR=$GLAD \
                install-strip
}
