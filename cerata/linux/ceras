version=4.18.5
url=https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-$version.tar.xz
checksum=604b334ccd74b230faf21db8887e382c49d4877ec8ce8298c079001a12222a6c7be2542c8f37c025cb3d625905d30e4c8c37267f0285aea25bbbe5aa3457040c

build_toolchain () {
	tar xfv $CERD/linux/linux-$version.tar.xz -C $TMPD/toolchain/sources

	cd $TMPD/toolchain/sources/linux-$version

	make mrproper
        O=$TMPD/toolchain/builds/linux ARCH=$ARCH make headers_check
        O=$TMPD/toolchain/builds/linux ARCH=$ARCH INSTALL_HDR_PATH=$PRFX/$TRPL make headers_install
}

build_system () {
	tar xfv $CERD/linux/linux-$version.tar.xz -C $TMPD/system/sources

	cd $TMPD/system/sources/linux-$version
	
	make mrproper
	cp $CERD/linux/glaucus.config .config
	
	ARCH=$ARCH CROSS_COMPILE=$TRPL- make oldconfig
	ARCH=$ARCH CROSS_COMPILE=$TRPL- make prepare
	ARCH=$ARCH CROSS_COMPILE=$TRPL- make
	ARCH=$ARCH CROSS_COMPILE=$TRPL- INSTALL_PATH=$GLAD/boot make install
}
