name=fontconfig
version=git
release=1
arch=x86_64
url=https://gitlab.freedesktop.org/$name/$name
cysts='musl expat json-c freetype'
description='Font configuration and customization library'
license='GPLv3+ HPND MIT'
build(){
        rsync -vah $CERD/$name/$name $SSRC --delete
        cd $SSRC/$name
        FREETYPE_CFLAGS="-I$GLAD/usr/include/freetype2 -I$GLAD/usr/include/libpng16 -I$GLAD/usr/include/harfbuzz -I$GLAD/usr/include/glib-2.0 -I$GLAD/usr/lib/glib-2.0/include" \
        FREETYPE_LIBS="-L$GLAD/usr/lib -lfreetype" \
        JSONC_CFLAGS="-I$GLAD/usr/include/json-c" \
        JSONC_LIBS="-L$GLAD/usr/lib -ljson-c" \
        ./autogen.sh \
                --prefix=/usr \
                --sysconfdir=/etc \
                --localstatedir=/var \
                --build=$TUPL \
                --host=$TUPL \
                --target=$TUPL \
                --disable-nls \
                --disable-docs \
                --with-sysroot=$GLAD \
                --without-libiconv \
                --with-expat=$GLAD/usr
        make
        make DESTDIR=$SCER/$name/sac \
                install-strip
}
